# ğŸ”’ æ•°æ®å®‰å…¨ä¿æŠ¤æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•å®‰å…¨åœ°ä½¿ç”¨æµ‹è¯•æµæ°´çº¿ï¼Œç¡®ä¿çœŸå®æ•°æ®ä¸ä¼šè¢«æ„å¤–åˆ é™¤ã€‚

## ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶

### 1. æµ‹è¯•æ•°æ®æ ‡è®°ç³»ç»Ÿ

æµ‹è¯•ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹æœºåˆ¶æ ‡è®°æµ‹è¯•æ•°æ®ï¼š

- **æ ‡è®°æ–‡ä»¶**: `.test_data_created_by_pipeline` è®°å½•æ‰€æœ‰æµ‹è¯•æ–‡ä»¶
- **æ–‡ä»¶å¤´æ ‡è®°**: æµ‹è¯•CSVæ–‡ä»¶å¼€å¤´åŒ…å« `# TEST_DATA_CREATED_BY_PIPELINE` æ³¨é‡Š
- **åŒé‡éªŒè¯**: æ¸…ç†æ—¶ä¼šæ£€æŸ¥æ ‡è®°æ–‡ä»¶å’Œæ–‡ä»¶å¤´æ ‡è®°

### 2. è‡ªåŠ¨å¤‡ä»½æœºåˆ¶

å½“æ£€æµ‹åˆ°çœŸå®æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šï¼š

1. æç¤ºç”¨æˆ·å­˜åœ¨çœŸå®æ•°æ®
2. è¯¢é—®æ˜¯å¦å¤‡ä»½
3. åˆ›å»ºå¸¦æ—¶é—´æˆ³çš„å¤‡ä»½ç›®å½•
4. å¤åˆ¶çœŸå®æ•°æ®åˆ°å¤‡ä»½ç›®å½•

### 3. å®‰å…¨æ¸…ç†æœºåˆ¶

æ¸…ç†åŠŸèƒ½çš„å®‰å…¨ç‰¹æ€§ï¼š

- âœ… åªåˆ é™¤ç¡®è®¤çš„æµ‹è¯•æ–‡ä»¶
- âœ… ä¿æŠ¤æ‰€æœ‰æœªæ ‡è®°çš„çœŸå®æ•°æ®
- âœ… æä¾›è¯¦ç»†çš„æ¸…ç†æŠ¥å‘Š
- âœ… æ”¯æŒæ•°æ®æ¢å¤

## ğŸ“‹ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æµç¨‹

```bash
# è¿è¡Œæµ‹è¯•ç³»ç»Ÿ (test_pipeline.py ä½äº tests/ ç›®å½•ä¸‹)
# å‡è®¾ä» InProject/ ç›®å½•è¿è¡Œ
python feature_extraction_scenario/tests/test_pipeline.py

# ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥æ•°æ®å®‰å…¨æ€§å¹¶æä¾›é€‰é¡¹èœå•
```

### é€‰é¡¹è¯´æ˜

1. **åˆ›å»ºæµ‹è¯•æ•°æ®** - åˆ›å»ºæ ‡è®°çš„æµ‹è¯•æ•°æ®
2. **è¿è¡Œå®Œæ•´æµ‹è¯•** - æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•æµç¨‹
3. **æ£€æŸ¥æ•°æ®å®‰å…¨æ€§** - æŸ¥çœ‹å½“å‰æ•°æ®çŠ¶æ€
4. **æ¸…ç†æµ‹è¯•æ–‡ä»¶** - å®‰å…¨åˆ é™¤æµ‹è¯•æ•°æ®
5. **æ¢å¤çœŸå®æ•°æ®** - ä»å¤‡ä»½æ¢å¤æ•°æ®
6. **é€€å‡º** - é€€å‡ºç¨‹åº

### æ•°æ®çŠ¶æ€è¯†åˆ«

ç³»ç»Ÿä¼šæ˜¾ç¤ºæ¯ä¸ªCSVæ–‡ä»¶çš„çŠ¶æ€ï¼š

```
ğŸ“„ å½“å‰CSVæ–‡ä»¶çŠ¶æ€:
   ğŸ§ª æµ‹è¯•æ•°æ®: email.csv
   ğŸ“‹ çœŸå®æ•°æ®: real_email.csv
```

## ğŸš¨ å®‰å…¨è­¦å‘Š

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **çœŸå®æ•°æ®æ£€æµ‹**: é¦–æ¬¡è¿è¡Œæ—¶å¦‚æœæ£€æµ‹åˆ°æœªæ ‡è®°çš„CSVæ–‡ä»¶ï¼Œä¼šè¢«è§†ä¸ºçœŸå®æ•°æ®
2. **å¤‡ä»½é‡è¦æ€§**: å¼ºçƒˆå»ºè®®åœ¨åˆ›å»ºæµ‹è¯•æ•°æ®å‰å¤‡ä»½çœŸå®æ•°æ®
3. **æ‰‹åŠ¨åˆ é™¤é£é™©**: ä¸è¦æ‰‹åŠ¨åˆ é™¤æ ‡è®°æ–‡ä»¶ï¼Œå¯èƒ½å¯¼è‡´å®‰å…¨æœºåˆ¶å¤±æ•ˆ

### ğŸ”„ æœ€ä½³å®è·µ

1. **å§‹ç»ˆå¤‡ä»½**: å¤„ç†é‡è¦æ•°æ®å‰è¿›è¡Œå¤‡ä»½
2. **æ£€æŸ¥çŠ¶æ€**: å®šæœŸä½¿ç”¨"æ£€æŸ¥æ•°æ®å®‰å…¨æ€§"åŠŸèƒ½
3. **åˆ†ç¦»ç¯å¢ƒ**: åœ¨ä¸åŒç›®å½•å¤„ç†çœŸå®æ•°æ®å’Œæµ‹è¯•æ•°æ®
4. **ç‰ˆæœ¬æ§åˆ¶**: ä½¿ç”¨Gitç­‰å·¥å…·ç®¡ç†ä»£ç å˜æ›´

## ğŸ“ æ–‡ä»¶ç»“æ„

### æµ‹è¯•æ•°æ®æ–‡ä»¶ (ä½äº tests/sample_test_data/)

```
tests/
  â””â”€â”€ sample_test_data/
      â”œâ”€â”€ .test_data_created_by_pipeline    # æ ‡è®°æ–‡ä»¶
      â”œâ”€â”€ email.csv                         # æµ‹è¯•æ•°æ®ï¼ˆå¸¦æ ‡è®°ï¼‰
      â”œâ”€â”€ file.csv                          # æµ‹è¯•æ•°æ®ï¼ˆå¸¦æ ‡è®°ï¼‰
      â”œâ”€â”€ http.csv                          # æµ‹è¯•æ•°æ®ï¼ˆå¸¦æ ‡è®°ï¼‰
      â”œâ”€â”€ logon.csv                         # æµ‹è¯•æ•°æ®ï¼ˆå¸¦æ ‡è®°ï¼‰
      â”œâ”€â”€ device.csv                        # æµ‹è¯•æ•°æ®ï¼ˆå¸¦æ ‡è®°ï¼‰
      â”œâ”€â”€ psychometric.csv                  # æµ‹è¯•æ•°æ®ï¼ˆå¸¦æ ‡è®°ï¼‰
      â””â”€â”€ answers/
          â””â”€â”€ insiders.csv              # æµ‹è¯•æ•°æ®
```

### å¤‡ä»½ç›®å½•ç»“æ„ (ä½äº tests/backup_data/)

```
tests/
  â””â”€â”€ backup_data/
      â””â”€â”€ backup_YYYYMMDD_HHMMSS/         # æ—¶é—´æˆ³å¤‡ä»½ç›®å½•
          â”œâ”€â”€ email.csv                   # å¤‡ä»½çš„çœŸå®æ•°æ®
â”œâ”€â”€ file.csv
â”œâ”€â”€ http.csv
â”œâ”€â”€ logon.csv
â”œâ”€â”€ device.csv
â””â”€â”€ psychometric.csv
```

### ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆé€šå¸¸ä½äº test_output/ æˆ–é¡¹ç›®æ ¹ç›®å½•ï¼Œå…·ä½“å–å†³äºå¦‚ä½•è¿è¡Œ pipelineï¼‰

```
feature_extraction_scenario/test_output/  # å½“é€šè¿‡ test_pipeline.py è¿è¡Œæ—¶
  â”œâ”€â”€ DataByWeek/                       # æŒ‰å‘¨æ•°æ®
  â”œâ”€â”€ NumDataByWeek/                    # ç‰¹å¾æ•°æ®
  â”œâ”€â”€ WeekLevelFeatures/                # å‘¨çº§åˆ«åˆ†æ
  â”œâ”€â”€ DayLevelFeatures/                 # æ—¥çº§åˆ«åˆ†æ
  â”œâ”€â”€ SessionLevelFeatures/             # ä¼šè¯çº§åˆ«åˆ†æ
  â””â”€â”€ ... (å…¶ä»–ç”Ÿæˆçš„æ–‡ä»¶)

# æˆ–è€…ï¼Œå¦‚æœç›´æ¥è¿è¡Œ core_logic/dataset_pipeline.py ä¸” work_dir æœªè¦†ç›–ï¼Œ
# è¿™äº›ç›®å½•å¯èƒ½åœ¨ feature_extraction_scenario/ æ ¹ç›®å½•ä¸‹åˆ›å»º (å·²è¢« .gitignore å¿½ç•¥)
# DataByWeek/
# NumDataByWeek/
# ...
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜1: è¯¯æ ‡è®°ä¸ºçœŸå®æ•°æ®

**ç—‡çŠ¶**: æµ‹è¯•æ•°æ®è¢«è¯†åˆ«ä¸ºçœŸå®æ•°æ®
**è§£å†³**: 
```bash
# æ‰‹åŠ¨åˆ é™¤æœ‰é—®é¢˜çš„æµ‹è¯•æ•°æ®æ–‡ä»¶ (æ³¨æ„è·¯å¾„ï¼Œä¾‹å¦‚ tests/sample_test_data/email.csv)
rm feature_extraction_scenario/tests/sample_test_data/email.csv ...
# é‡æ–°åˆ›å»ºæµ‹è¯•æ•°æ®
python feature_extraction_scenario/tests/test_pipeline.py
```

### é—®é¢˜2: æ ‡è®°æ–‡ä»¶ä¸¢å¤±

**ç—‡çŠ¶**: æ— æ³•è¯†åˆ«æµ‹è¯•æ•°æ®
**è§£å†³**:
```bash
# æ£€æŸ¥æ–‡ä»¶å¤´æ˜¯å¦æœ‰æµ‹è¯•æ ‡è®° (æ³¨æ„è·¯å¾„)
head -1 feature_extraction_scenario/tests/sample_test_data/email.csv
# å¦‚æœç¡®è®¤æ˜¯æµ‹è¯•æ•°æ®ï¼Œæ‰‹åŠ¨åˆ é™¤
rm feature_extraction_scenario/tests/sample_test_data/email.csv ...
```

### é—®é¢˜3: éœ€è¦æ¢å¤æ•°æ®

**ç—‡çŠ¶**: æ„å¤–åˆ é™¤äº†çœŸå®æ•°æ®
**è§£å†³**:
```bash
# ä½¿ç”¨æ¢å¤åŠŸèƒ½
python feature_extraction_scenario/tests/test_pipeline.py
# é€‰æ‹©é€‰é¡¹ 5: æ¢å¤çœŸå®æ•°æ®
```

## ğŸ” éªŒè¯å®‰å…¨æ€§

### æ£€æŸ¥æµ‹è¯•æ•°æ®æ ‡è®°

```bash
# æ£€æŸ¥æ ‡è®°æ–‡ä»¶ (ä½äº tests/sample_test_data/)
cat feature_extraction_scenario/tests/sample_test_data/.test_data_created_by_pipeline

# æ£€æŸ¥CSVæ–‡ä»¶å¤´ (ä½äº tests/sample_test_data/)
head -1 feature_extraction_scenario/tests/sample_test_data/email.csv
# åº”è¯¥çœ‹åˆ°: # TEST_DATA_CREATED_BY_PIPELINE at ...
```

### éªŒè¯çœŸå®æ•°æ®ä¿æŠ¤

```bash
# è¿è¡Œå®‰å…¨æ£€æŸ¥ (ç¡®ä¿ PYTHONPATH æˆ–å½“å‰è·¯å¾„å…è®¸å¯¼å…¥)
# å‡è®¾ä» InProject/ è¿è¡Œ
python -c "
import sys
sys.path.append('.') # æ·»åŠ  InProject åˆ°è·¯å¾„
from feature_extraction_scenario.tests import test_pipeline
test_pipeline.check_data_safety()
"
```

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°æ•°æ®å®‰å…¨é—®é¢˜ï¼š

1. **ç«‹å³åœæ­¢æ“ä½œ** - é¿å…è¿›ä¸€æ­¥çš„æ•°æ®é£é™©
2. **æ£€æŸ¥å¤‡ä»½ç›®å½•** - æŸ¥æ‰¾ä»¥`backup_`å¼€å¤´çš„ç›®å½•
3. **ä½¿ç”¨æ¢å¤åŠŸèƒ½** - é€šè¿‡ç¨‹åºèœå•æ¢å¤æ•°æ®
4. **è”ç³»æ”¯æŒå›¢é˜Ÿ** - æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## ğŸ”® æ›´æ–°è®°å½•

- **v1.0**: åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€å®‰å…¨ä¿æŠ¤
- **v1.1**: å¢åŠ æ–‡ä»¶å¤´æ ‡è®°ç³»ç»Ÿ
- **v1.2**: æ·»åŠ å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½
- **v1.3**: å®Œå–„å®‰å…¨æ£€æŸ¥å’Œç”¨æˆ·äº¤äº’ 